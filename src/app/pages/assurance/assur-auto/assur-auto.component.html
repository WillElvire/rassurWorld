<div class="container-fluid">
  <app-loader *ngIf="enable"></app-loader>
  <div class="row justify-content-center" *ngIf="!enable">
    <div
      class="col-11 col-sm-9 col-md-7 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2"
    >
      <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
        <h2 id="heading">{{ insurance?.libelle | titlecase }}</h2>
        <p>Veuillez renseigner tous les champs requis.</p>

        <form id="msform">
          <!-- progressbar -->
          <ul id="progressbar">
            <li [ngClass]="{ active: step1 }" id="account">
              <strong>Mon Compte</strong>
            </li>
            <li [ngClass]="{ active: step2 }" id="personal">
              <strong>Mon offre</strong>
            </li>
            <li [ngClass]="{ active: step3 }" id="confirm">
              <strong>Choix du tiers</strong>
            </li>
            <li [ngClass]="{ active: step4 }" id="payment">
              <strong>Carte grise</strong>
            </li>
          </ul>

          <br />
          <!-- fieldsets -->
          <fieldset *ngIf="step1">
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Informations Personnelle:</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Etape 1 - 4</h2>
                </div>
              </div>
              <!------------------- STEP 1  -------------------->
              <div class="grid">
                <div class="row">
                  <div class="col-md-6">
                    <label>Votre nom (*)</label>
                    <input
                      class="form-control"
                      placeholder="renseigner votre nom"
                      [(ngModel)]="userForm.firstname"
                      [ngModelOptions]="{ standalone: true }"
                    />
                  </div>
                  <div class="col-md-6">
                    <label>Votre prenom (*)</label>
                    <input
                      class="form-control"
                      placeholder="renseigner votre prenom"
                      [(ngModel)]="userForm.lastname"
                      [ngModelOptions]="{ standalone: true }"
                    />
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label>email (*)</label>
                    <input
                      class="form-control"
                      placeholder="renseigner votre email"
                      type="email"
                      [(ngModel)]="userForm.email"
                      [ngModelOptions]="{ standalone: true }"
                    />
                  </div>
                  <div class="col-md-6">
                    <label>Téléphone (*)</label>
                    <input
                      class="form-control"
                      placeholder="renseigner votre numero de téléphone (Ex : +2250000000000)"
                      type="tel"
                      [(ngModel)]="userForm.phone"
                      [ngModelOptions]="{ standalone: true }"
                    />
                  </div>
                </div>

                <div class="alert alert-info mt-4">
                  <span class="fa fa-info"></span>
                  Si vous utilisez WhatsApp, toutes les notifications vous seront envoyées par ce canal.
                </div>

                <div class="row">
                  <label class="ml-3">Voulez vous utiliser whatsapp ?</label>
                  <input
                    type="checkbox"
                    class="ml-3"
                    [(ngModel)]="userForm.useWhatsapp"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>
              <!------------------- END STEP 1  -------------------->
            </div>
            <input
              type="button"
              name="suivant"
              (click)="startFirstStep()"
              class="next action-button"
              value="suivant"
            />
          </fieldset>
          <fieldset *ngIf="step2">
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Offre:</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Etape 2 - 4</h2>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>Date d'effet (*)</label>
                  <input
                    type="date"
                    class="form-control"
                    [(ngModel)]="autoInsurance.date_a_effet"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
                <div class="col-md-6">
                  <label>Périodicité (*)</label>
                  <select
                    class="form-control"
                    [(ngModel)]="autoInsurance.periodicity"
                    [ngModelOptions]="{ standalone: true }"
                  >
                    <option></option>
                    <option
                      value="{{ month }}"
                      *ngFor="let month of months"
                      value="{{ month + 1 }}"
                    >
                      {{ month + 1 }} mois
                    </option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <label>Valeur a neuf FCFA (*)</label>
                  <input
                    type="number"
                    class="form-control"
                    [(ngModel)]="autoInsurance.valeur_a_neuf"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
                <div class="col-md-6">
                  <label>Prix estimé a la vente FCFA (*)</label>
                  <input
                    type="number"
                    class="form-control"
                    [(ngModel)]="autoInsurance.price"
                    [ngModelOptions]="{ standalone: true }"
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <label>Code de l'apporteur d'affaire</label>
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="parrainCode"
                    [ngModelOptions]="{ standalone: true }"
                    placeholder="Code apporteur"
                  />
                </div>
              </div>
            </div>
            <input
              type="button"
              name="next"
              class="next action-button"
              value="Suivant"
              (click)="startSecondStep()"
            />
          </fieldset>
          <fieldset *ngIf="step4">
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Carte Grise :</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Etape 4 - 4</h2>
                </div>
              </div>
              <div class="file">
                <p>Veuillez téléverser votre carte grise</p>
                <input
                  type="file"
                  class="form-control"
                  id="file"
                  (change)="onFileSelected($event)"
                />
              </div>
            </div>
            <input
              type="button"
              name="next"
              class="next action-button"
              value="Enregistrer"
              (click)="startFinalStep()"
            />
          </fieldset>
          <fieldset *ngIf="step3">
            <div class="form-card">
              <div class="row">
                <div class="col-7">
                  <h2 class="fs-title">Choix du tiers :</h2>
                </div>
                <div class="col-5">
                  <h2 class="steps">Etape 3 - 4</h2>
                </div>
              </div>
              <br />
              <app-type-tiers
                (userChoice)="getUserChoice($event)"
              ></app-type-tiers>
              <div class="row">
                <input
                  type="button"
                  name="previous"
                  (click)="enableNewStep(2)"
                  class="previous action-button-previous"
                  value="Precedent"
                />

                <input
                  type="button"
                  name="next"
                  class="next action-button"
                  (click)="startThirdStep()"
                  value="Suivant"
                />
              </div>
            </div>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
</div>
